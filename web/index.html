<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dialogstöd inom ryggkirurgi – baserat på Svenska Ryggregistret Swespine</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body onLoad="initializeContent()">
    <div class="container">
        <div class="left-section">
            <div class="tabs">
                <button class="tab-button tab-button-patient-data active" data-tab="basinformation">Basinformation</button>
                <button class="tab-button tab-button-patient-data" data-tab="ryggspecifik">Ryggspecifik information</button>
            </div>
            <div class="tab-content">
                <div id="basinformation" class="tab-pane tab-pane-patient-data active">
                    <h2>Undergrupp</h2>
                    <div class="form-group">
                        <label for="diagnosis" class="label">Diagnosgrupp</label>
                        <select id="diagnosis" class="input" onchange="initializeContent()">
                            <option value="disc_herniation">Diskbråck</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="label">Opererade nivåer</label>
                        <div id="opererade-nivaer" class="input radio-group">
                            <input type="radio" id="nivaer1" name="nivaer" value="1">
                            <label for="nivaer1">1</label>
                            <input type="radio" id="nivaer2" name="nivaer" value="2">
                            <label for="nivaer2">2</label>
                            <input type="radio" id="nivaer3" name="nivaer" value="3">
                            <label for="nivaer3">3</label>
                            <input type="radio" id="nivaer4" name="nivaer" value="4">
                            <label for="nivaer4">4</label>
                            <input type="radio" id="nivaer5" name="nivaer" value="5+">
                            <label for="nivaer5">5+</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="kliniktyp" class="label">Kliniktyp</label>
                        <select id="kliniktyp" class="input">
                            <option>Offentlig</option>
                            <option>Privat</option>
                            <option>Universitetssjukhus</option>
                        </select>
                    </div>

                    <h2>Sociodemografi</h2>
                    <div class="form-group">
                        <label for="AgeAtSurgery" class="label">Ålder</label>
                        <input type="number" id="AgeAtSurgery" class="input">
                    </div>
                    <div class="form-group">
                        <label class="label">Kön</label>
                        <div class="input radio-group">
                            <input type="radio" id="Female1" name="Female" value="1">
                            <label for="Female1">Kvinna</label>
                            <input type="radio" id="Female0" name="Female" value="0">
                            <label for="Female0">Man</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="label">Arbetslös</label>
                        <div class="input radio-group">
                            <input type="radio" id="IsUnemployed1" name="IsUnemployed" value="1">
                            <label for="IsUnemployed1">Ja</label>
                            <input type="radio" id="IsUnemployed0" name="IsUnemployed" value="0">
                            <label for="IsUnemployed0">Nej</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="label">Sjukpension</label>
                        <div class="input radio-group">
                            <input type="radio" id="HasSickPension1" name="HasSickPension" value="1">
                            <label for="HasSickPension1">Ja, heltid / deltid</label>
                            <input type="radio" id="HasSickPension0" name="HasSickPension" value="0">
                            <label for="HasSickPension0">Nej</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="label">Ålderspension</label>
                        <div class="input radio-group">
                            <input type="radio" id="HasAgePension1" name="HasAgePension" value="1">
                            <label for="HasAgePension1">Ja, heltid / deltid</label>
                            <input type="radio" id="HasAgePension0" name="HasAgePension" value="0">
                            <label for="HasAgePension0">Nej</label>
                        </div>
                    </div>

                    <h2>Hälsoprofil</h2>
                    <div class="form-group">
                        <label class="label">Rökare</label>
                        <div class="input radio-group">
                            <input type="radio" id="IsSmoker1" name="IsSmoker" value="1">
                            <label for="IsSmoker1">Ja</label>
                            <input type="radio" id="IsSmoker0" name="IsSmoker" value="0">
                            <label for="IsSmoker0">Nej</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="label">Tidigare ryggop</label>
                        <div class="input radio-group">
                            <input type="radio" id="IsPreviouslyOperated1" name="IsPreviouslyOperated" value="1">
                            <label for="IsPreviouslyOperated1">Ja</label>
                            <input type="radio" id="IsPreviouslyOperated0" name="IsPreviouslyOperated" value="0">
                            <label for="IsPreviouslyOperated0">Nej</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="label">Samsjuklighet</label>
                        <div class="input radio-group">
                            <input type="radio" id="HasOtherIllness1" name="HasOtherIllness" value="1">
                            <label for="HasOtherIllness1">Ja</label>
                            <input type="radio" id="HasOtherIllness0" name="HasOtherIllness" value="0">
                            <label for="HasOtherIllness0">Nej</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="EQ5DIndex" class="label">EQ5D</label>
                        <input type="text" id="EQ5DIndex-value" class="input">
                        <input type="range" id="EQ5DIndex" min="-0.59" max="1" step="0.01" class="input">
                    </div>
                </div>

                <div id="ryggspecifik" class="tab-pane tab-pane-patient-data">
                    <h2>Hälsoprofil</h2>
                    <div class="form-group">
                        <label for="AbilityWalking" class="label">Promenadsträcka</label>
                        <select id="AbilityWalking" class="input">
                            <option value="1">0-100 meter</option>
                            <option value="2">100-500 meter</option>
                            <option value="3">0,5-1 kilometer</option>
                            <option value="4">Mer än 1 kilometer</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="DurationLegPain" class="label">Smärtduration i ben</label>
                        <select id="DurationLegPain" class="input">
                            <option value="0">Ingen smärta</option>
                            <option value="1">Mindre än 3 månader</option>
                            <option value="2">3 till 12 månader</option>
                            <option value="3">1 till 2 år</option>
                            <option value="4">Mer än 2 år</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="DurationBackPain" class="label">Smärtduration i rygg</label>
                        <select id="DurationBackPain" class="input">
                            <option value="0">Ingen smärta</option>
                            <option value="1">Mindre än 3 månader</option>
                            <option value="2">3 till 12 månader</option>
                            <option value="3">1 till 2 år</option>
                            <option value="4">Mer än 2 år</option>
                        </select>
                    </div>

                    <h2>Preop smärta (NRS)</h2>
                    <div class="form-group">
                        <label for="NRSLegPain" class="label">Smärta i ben</label>
                        <input type="text" id="NRSLegPain-value" class="input">
                        <input type="range" id="NRSLegPain" min="0" max="10" step="1" class="input">
                    </div>
                    <div class="form-group">
                        <label for="NRSBackPain" class="label">Smärta i rygg</label>
                        <input type="text" id="NRSBackPain-value" class="input">
                        <input type="range" id="NRSBackPain" min="0" max="10" step="1" class="input">
                    </div>

                    <h2>Funktionsnedsättning</h2>
                    <div class="form-group">
                        <label for="ODI" class="label">Funktionsnedsättning</label>
                        <input type="text" id="ODI-value" class="input">
                        <input type="range" id="ODI" min="0" max="100" step="1" class="input">
                    </div>
                </div>
            </div>
        </div>
        <div class="right-section">
            <div class="tabs">
                <button class="tab-button tab-button-prediction active" data-tab="satisfaction">
                    Nöjd: <span id="tab_prediction_satisfaction"></span>
                </button>
                <button class="tab-button tab-button-prediction" data-tab="outcome">
                    Lyckat utfall: <span id="tab_prediction_outcome"></span>
                </button>
            </div>
            <div class="tab-content">
                <div id="satisfaction" class="tab-pane tab-pane-prediction active">
                    <div class="box" style="text-align: center;">
                        <h2>Sannolikhet att bli nöjd med operation</h2>
                        <div id="prediction_satisfaction" class="prediction"></div>
                    </div>
                    <div class="explanation-section">
                        <h3 class="header-container" id="toggle-clickable-local-explanation-satisfaction">
                            <div class="square" id="toggle-button-local-explanation-satisfaction">+</div> Förklaring för den specifika förutsägelsen</h3>
                        <div id="collapsible-container-local-explanation-satisfaction" class="collapsible-container">
                            <div id="collapsible-content-local-explanation-satisfaction">
                                <div class="box">
                                    <div id="featureContributions_satisfaction"></div>
                                    <div style="padding-top:10px">
                                        Diagrammet visar hur sannolikheten att bli nöjd med operation beräknas utifrån sannolikheten att bli nöjd för en genomsnittlig patient samt faktorer avseende vald patientprofil. Faktorer med grön stapel påverkar beräknad sannolikhet positivt, medan faktorer med röd stapel påverkar beräknad sannolikhet negativt.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="explanation-section">
                        <h3 class="header-container" id="toggle-clickable-global-explanation-satisfaction">
                            <div class="square" id="toggle-button-global-explanation-satisfaction">+</div> Allmän förklaring för denna typ av förutsägelse</h3>
                        <div id="collapsible-container-global-explanation-satisfaction" class="collapsible-container">
                            <div id="collapsible-content-global-explanation-satisfaction">
                                <div class="box" style="text-align: left;">
                                    Fråga i swespine: <ul id="swespine_question_satisfaction"></></ul>
                                    Definition: <ul id="swespine_definition_satisfaction"></ul>
                                    Modellen förutsäger nöjdhet på basis av en stor mängd data om tidigare operationsresultat från alla kliniker i Sverige under en tioårsperiod, och uppdateras varje år.
                                    Hur de olika faktorerna (ålder, kön etc.) i allmänhet påverkar beräknad nöjdhet framgår nedan.
                                    <div id="globalExplanationTable_satisfaction"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="outcome" class="tab-pane tab-pane-prediction">
                    <div class="box" style="text-align: center;">
                        <h2>Sannolikhet för lyckat utfall<br />
                            <span style="font-weight:normal; font-size:80%;">(smärtan helt försvunnen eller mycket förbättrad efter 1 år)</span></h2>
                        <div id="prediction_outcome" class="prediction"></div>
                    </div>
                    <div class="explanation-section">
                        <h3 class="header-container" id="toggle-clickable-local-explanation-outcome">
                            <div class="square" id="toggle-button-local-explanation-outcome">+</div> Förklaring för den specifika förutsägelsen</h3>
                        <div id="collapsible-container-local-explanation-outcome" class="collapsible-container">
                            <div id="collapsible-content-local-explanation-outcome">
                                <div class="box">
                                    <div id="featureContributions_outcome"></div>
                                    <div style="padding-top:10px">
                                        Diagrammet visar hur sannolikheten för lyckat utfall av operation beräknas utifrån sannolikheten för lyckat utfall för en genomsnittlig patient samt faktorer avseende vald patientprofil. Faktorer med grön stapel påverkar beräknad sannolikhet positivt, medan faktorer med röd stapel påverkar beräknad sannolikhet negativt.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="explanation-section">
                        <h3 class="header-container" id="toggle-clickable-global-explanation-outcome">
                            <div class="square" id="toggle-button-global-explanation-outcome">+</div> Allmän förklaring för denna typ av förutsägelse</h3>
                        <div id="collapsible-container-global-explanation-outcome" class="collapsible-container">
                            <div id="collapsible-content-global-explanation-outcome">
                                <div class="box" style="text-align: left;">
                                    Fråga i swespine: <ul id="swespine_question_outcome"></></ul>
                                    Definition: <ul id="swespine_definition_outcome"></ul>
                                    Modellen förutsäger utfall på basis av en stor mängd data om tidigare operationsresultat från alla kliniker i Sverige under en tioårsperiod, och uppdateras varje år.
                                    Hur de olika faktorerna (ålder, kön etc.) i allmänhet påverkar beräknat utfall framgår nedan.
                                    <div id="globalExplanationTable_outcome"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="plotly-2.11.1.min.js"></script>
    <script src="satisfaction_disc_herniation_coefs.js"></script>
    <script src="outcome_disc_herniation_coefs.js"></script>
    <script src="mean_disc_herniation.js"></script>
    <script src="script.js"></script>
</body>
</html>
